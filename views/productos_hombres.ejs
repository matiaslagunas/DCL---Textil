<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos</title>
    <link rel="icon" type="image/png" href="/images/logo DCL+ Negro.png">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/custom.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/productos-generico.css">
</head>
<body>
    <%- include('partials/header') %>
    <div class="titulo">
        <h5>
            <a  class="<%= (pagina === 'hombres') ? 'activo' : '' %>"   href="/productos/Hombres">Hombres</a> - 
            <a href="/productos/Mujeres">Mujeres</a> - 
            <a href="/productos/Ninios">Ni√±os</a> - 
            <a href="/productos/Unisex">Unisex</a>
          </h5>
          
        <a href="/productos">< Volver</a>
        <h2 class="productos-titulo">Indumentaria Hombres</h2>
    </div>
    <section class="productos-scroll">
      <div class="productos-container">
        <% productos.forEach((producto, index) => { %>
          <a href="#" class="link-producto" data-index="<%= index %>">
            <div class="producto">
              <img src="/<%= producto.image %>" alt="<%= producto.titulo %>">
              <div class="info">
                <h4><%= producto.titulo %></h4>
                <p><%= producto.tipoPrenda %></p>
              </div>
            </div>
          </a>
        <% }) %>
      </div>
    </section>


    
<!-- Modal -->
<div id="modal-producto" class="modal oculto">
  <div class="modal-contenido">
    <span class="cerrar">&times;</span>
    <div class="mobile-modal" style="display: flex; gap: 20px;">
      <div class="zoom-container" id="zoom-container">
        <img id="modal-imagen" src="" alt="" />
      </div>
      <div class="texto-modal">
        <h2 id="modal-titulo"></h2>
        <p id="modal-marca"></p>
        <p id="modal-descripcion"></p>
      </div>
    </div>
  </div>
</div>

<script>
  const productos = <%- JSON.stringify(productos) %>;
  const zoomContainer = document.getElementById('zoom-container');
  const modalImagen = document.getElementById('modal-imagen');

  document.querySelectorAll('.link-producto').forEach((link, index) => {
    link.addEventListener('click', (e) => {
      e.preventDefault();

      const prod = productos[index];
      modalImagen.src = '/' + prod.image;

      // Ponemos la imagen como fondo para zoom y reset backgroundPosition
      zoomContainer.style.backgroundImage = `url('/${prod.image}')`;
      zoomContainer.style.backgroundPosition = 'center';
      zoomContainer.classList.remove('zoom-active');

      document.getElementById('modal-titulo').textContent = prod.titulo;
      document.getElementById('modal-marca').textContent = prod.tipoPrenda;
      document.getElementById('modal-descripcion').textContent = prod.descripcion;
      document.getElementById('modal-producto').classList.remove('oculto');
    });
  });

  // Activar zoom al entrar el mouse
  zoomContainer.addEventListener('mouseenter', () => {
    zoomContainer.classList.add('zoom-active');
  });

  // Mover el zoom con el mouse
  zoomContainer.addEventListener('mousemove', e => {
    if (!zoomContainer.classList.contains('zoom-active')) return;

    const rect = zoomContainer.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    const xPercent = (x / rect.width) * 100;
    const yPercent = (y / rect.height) * 100;

    zoomContainer.style.backgroundPosition = `${xPercent}% ${yPercent}%`;
  });

  // Desactivar zoom al salir el mouse
  zoomContainer.addEventListener('mouseleave', () => {
    zoomContainer.classList.remove('zoom-active');
    zoomContainer.style.backgroundPosition = 'center';
  });

  // Cerrar modal
  document.querySelector('.modal .cerrar').addEventListener('click', () => {
    document.getElementById('modal-producto').classList.add('oculto');
  });
</script>

    
    <%- include('partials/footer') %>
</body>
</html>
